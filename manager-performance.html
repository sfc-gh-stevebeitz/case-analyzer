<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Performance Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .managers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .manager-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .manager-card:hover {
            transform: translateY(-5px);
        }

        .manager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .manager-info h2 {
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .manager-role {
            color: #666;
            font-size: 0.9rem;
        }

        .manager-emoji {
            font-size: 3rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .manager-emoji:hover {
            transform: scale(1.2) rotate(5deg);
        }

        .performance-section {
            margin-bottom: 20px;
        }

        .performance-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .performance-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.8s ease;
        }

        .steve-bar { background: linear-gradient(90deg, #ff6b6b, #ff4757); }
        .brian-bar { background: linear-gradient(90deg, #ff9ff3, #f368e0); }
        .kirsty-bar { background: linear-gradient(90deg, #feca57, #ff9ff3); }

        .mood-indicator {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .mood-text {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .update-time {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .footer {
            text-align: center;
            color: white;
            opacity: 0.8;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>🎯 Manager Performance Dashboard</h1>
            <p>Real-time monitoring of your management team's emotional states</p>
        </div>

        <div class="managers-grid">
            <!-- Steve's Card -->
            <div class="manager-card">
                <div class="manager-header">
                    <div class="manager-info">
                        <h2>Steve <span style="background: #ff4757; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem;">DNM</span></h2>
                        <div class="manager-role">Director of Not Managing</div>
                    </div>
                    <div class="manager-emoji">😢</div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="steve-cases-avoided">42</div>
                        <div class="stat-label">Cases Avoided</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="steve-delegation-rate">73%</div>
                        <div class="stat-label">Delegation Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="steve-coffee-breaks">∞</div>
                        <div class="stat-label">Coffee Breaks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="steve-problems-solved">0</div>
                        <div class="stat-label">Problems Solved</div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Management Effectiveness</span>
                        <span id="steve-effectiveness">15%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill steve-bar" id="steve-effectiveness-bar" style="width: 15%"></div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Sadness Level</span>
                        <span id="steve-sadness">87%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill steve-bar" id="steve-sadness-bar" style="width: 87%"></div>
                    </div>
                </div>
                
                <div class="mood-indicator">
                    <div class="mood-text">Current Status: Overwhelmed</div>
                    <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                        Last seen hiding in the supply closet
                    </p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="cheerUpSteve()">Send Coffee ☕</button>
                    <button class="btn btn-secondary" onclick="moreWork()">Assign More Work 📋</button>
                </div>
            </div>
            
            <!-- Brian's Card -->
            <div class="manager-card">
                <div class="manager-header">
                    <div class="manager-info">
                        <h2>Brian</h2>
                        <div class="manager-role">Senior Grump Officer</div>
                    </div>
                    <div class="manager-emoji">😠</div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="brian-complaints">156</div>
                        <div class="stat-label">Complaints Filed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="brian-eye-rolls">23</div>
                        <div class="stat-label">Eye Rolls/Hour</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="brian-sighs">47</div>
                        <div class="stat-label">Sighs Recorded</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="brian-snacks-consumed">12</div>
                        <div class="stat-label">GF Snacks Today</div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Management Effectiveness</span>
                        <span id="brian-effectiveness">78%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill brian-bar" id="brian-effectiveness-bar" style="width: 78%"></div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Grumpiness Level</span>
                        <span id="brian-grumpiness">94%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill brian-bar" id="brian-grumpiness-bar" style="width: 94%"></div>
                    </div>
                </div>
                
                <div class="mood-indicator">
                    <div class="mood-text">Current Status: Dangerously Grumpy</div>
                    <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                        Warning: Approach with extreme caution
                    </p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="appeaseBrian()">🍽️ Appeasement Center</button>
                    <button class="btn btn-secondary" onclick="avoidBrian()">Avoid All Day 🏃‍♂️</button>
                </div>
            </div>
            
            <!-- Kirsty's Card -->
            <div class="manager-card">
                <div class="manager-header">
                    <div class="manager-info">
                        <h2>Kirsty</h2>
                        <div class="manager-role">Chief Beach Operations Officer (AU)</div>
                    </div>
                    <div class="manager-emoji">😎</div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="kirsty-beach-days">🌊</div>
                        <div class="stat-label">Beach Days This Week</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="kirsty-sun-exposure">☀️</div>
                        <div class="stat-label">Sun Exposure Level</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="kirsty-tim-tams">6</div>
                        <div class="stat-label">Tim Tams Consumed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="kirsty-chill-factor">∞</div>
                        <div class="stat-label">Chill Factor</div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Beach Productivity</span>
                        <span id="kirsty-productivity">97%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill kirsty-bar" id="kirsty-productivity-bar" style="width: 97%"></div>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-label">
                        <span>Aussie Vibes Level</span>
                        <span id="kirsty-vibes">💯%</span>
                    </div>
                    <div class="performance-bar">
                        <div class="bar-fill kirsty-bar" id="kirsty-vibes-bar" style="width: 100%"></div>
                    </div>
                </div>
                
                <div class="mood-indicator">
                    <div class="mood-text">Current Status: Living the Dream</div>
                    <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                        Last GPS ping: Bondi Beach (again)
                    </p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="checkOnKirsty()">Check Beach Status 🌊</button>
                    <button class="btn btn-secondary" onclick="kirstyBeachActivities()">Beach Activities 🏄‍♀️</button>
                    <button class="btn btn-secondary" onclick="sendWork()">Send Work (LOL) 📧</button>
                </div>
            </div>
        </div>
        
        <div class="update-time">
            <strong>Last Updated:</strong> <span id="updateTime"></span><br>
            <small>Refreshing every 30 seconds for maximum accuracy</small>
        </div>
        
        <div class="footer">
            <p>⚡ Powered by Advanced Manager Mood Detection Technology™</p>
        </div>
    </div>

    <script>
        // ===== ALL FUNCTIONS DEFINED FIRST =====
        
        function cheerUpSteve() {
            const drink = getDrinkForSteve();
            const currentSadness = parseInt(document.getElementById('steve-sadness').textContent.replace('%', ''));
            const effectiveness = Math.random() * 0.4 + 0.6; // 60-100% effectiveness
            const reduction = Math.floor(drink.baseReduction * effectiveness);
            const newSadness = Math.max(40, currentSadness - reduction);
            const effectivenessIncrease = Math.floor(effectiveness * 10);
            const currentEffectiveness = parseInt(document.getElementById('steve-effectiveness').textContent.replace('%', ''));
            const newEffectiveness = Math.min(95, currentEffectiveness + effectivenessIncrease);
            
            // Update meters immediately
            document.getElementById('steve-sadness').textContent = newSadness + '%';
            document.getElementById('steve-sadness-bar').style.width = newSadness + '%';
            document.getElementById('steve-effectiveness').textContent = newEffectiveness + '%';
            document.getElementById('steve-effectiveness-bar').style.width = newEffectiveness + '%';
            
            // Update coffee breaks counter
            const coffeeBreaks = document.getElementById('steve-coffee-breaks');
            if (coffeeBreaks.textContent === '∞') {
                coffeeBreaks.textContent = '∞+1';
            } else {
                coffeeBreaks.textContent = '∞++';
            }
            
            alert(`${drink.emoji} ${drink.name} delivery dispatched to Steve!\n\nEffect: ${drink.effect}\nSadness reduction: ${reduction}%\nStatus: ${currentSadness}% → ${newSadness}%\nEffectiveness: ${currentEffectiveness}% → ${newEffectiveness}%\nSide effects: ${drink.sideEffect}\nDrink effectiveness: ${Math.floor(effectiveness * 100)}%`);
            
            // Animate Steve's emoji
            const steveEmoji = document.querySelector('.managers-grid .manager-card:first-child .manager-emoji');
            steveEmoji.style.transform = 'scale(1.5) rotate(10deg)';
            setTimeout(() => {
                steveEmoji.style.transform = 'scale(1) rotate(0deg)';
            }, 1000);
        }
        
        function moreWork() {
            const currentSadness = parseInt(document.getElementById('steve-sadness').textContent.replace('%', ''));
            const newSadness = Math.min(99, currentSadness + 15);
            const currentEffectiveness = parseInt(document.getElementById('steve-effectiveness').textContent.replace('%', ''));
            const newEffectiveness = Math.max(5, currentEffectiveness - 8);
            
            // Update meters
            document.getElementById('steve-sadness').textContent = newSadness + '%';
            document.getElementById('steve-sadness-bar').style.width = newSadness + '%';
            document.getElementById('steve-effectiveness').textContent = newEffectiveness + '%';
            document.getElementById('steve-effectiveness-bar').style.width = newEffectiveness + '%';
            
            // Update cases avoided (ironically)
            const casesAvoided = document.getElementById('steve-cases-avoided');
            casesAvoided.textContent = parseInt(casesAvoided.textContent) + Math.floor(Math.random() * 3) + 1;
            
            alert(`📋 More work assigned to Steve!\n\nWarning: Sadness level increased ${currentSadness}% → ${newSadness}%\nEffectiveness decreased ${currentEffectiveness}% → ${newEffectiveness}%\nCritical alert: Steve now making concerning noises\nCases that will be avoided: ${casesAvoided.textContent}`);
        }
        
        function appeaseBrian() {
            const snackOptions = getBrianSnackOptions();
            let optionsText = "🍽️ BRIAN APPEASEMENT CENTER\n\nSelect your offering:\n\n";
            
            snackOptions.forEach((snack, index) => {
                optionsText += `${index + 1}. ${snack.emoji} ${snack.name}\n`;
                optionsText += `   Success Rate: ${snack.successRate}%\n`;
                optionsText += `   Risk: ${snack.risk}\n\n`;
            });
            
            optionsText += "Enter number (1-" + snackOptions.length + "):";
            
            const choice = prompt(optionsText);
            const selectedIndex = parseInt(choice) - 1;
            
            if (selectedIndex >= 0 && selectedIndex < snackOptions.length) {
                const selectedSnack = snackOptions[selectedIndex];
                const outcome = calculateBrianOutcome(selectedSnack);
                
                // Update Brian's meters based on outcome
                updateBrianMeters(outcome, selectedSnack);
                alert(outcome.message);
                animateBrianReaction(outcome);
            } else {
                alert("🤷‍♂️ Invalid selection! Brian notices your hesitation and becomes 5% more grumpy.");
            }
        }
        
        function avoidBrian() {
            alert("🏃‍♂️ Avoidance protocol activated!\n\nSafety measures:\n• Alternative routes mapped\n• Stealth mode engaged\n• Emergency chocolate reserves deployed\n\nGood luck, soldier!");
        }
        
        function checkOnKirsty() {
            const activity = getKirstyCurrentActivity();
            const hour = new Date().getHours();
            const ausHour = (hour + 15) % 24; // Convert to Australian time
            const beachVibes = Math.floor(Math.random() * 5) + 95; // Always 95-99%
            
            alert(`🌊 Kirsty Beach Status Report:\n\nAussie Time: ${ausHour}:00\nLocation: ${activity.location}\nActivity: Currently ${activity.activity}\nMood: ${activity.status}\nBeach Vibes Level: ${beachVibes}%\nTemperature: Perfect (obviously)\nWork Status: What work?\n\nNote: Living the Australian dream! 🇦🇺`);
            
            // Animate Kirsty's emoji
            const kirstyEmoji = document.querySelector('.managers-grid .manager-card:last-child .manager-emoji');
            kirstyEmoji.style.transform = 'scale(1.3) rotate(-5deg)';
            setTimeout(() => {
                kirstyEmoji.style.transform = 'scale(1) rotate(0deg)';
            }, 2000);
        }
        
        function kirstyBeachActivities() {
            const hour = new Date().getHours();
            const ausHour = (hour + 15) % 24;
            
            const activities = [
                {
                    emoji: "🏄‍♀️",
                    name: "Challenge to Surf Competition",
                    successRate: 95,
                    outcomes: {
                        success: { productivity: 8, vibes: 2, timTams: 0, message: "Kirsty dominates the waves! Locals are impressed and invite her to the pro circuit!" },
                        failure: { productivity: -2, vibes: 0, timTams: 1, message: "Kirsty wipes out spectacularly but laughs it off. 'No worries, mate! That's what Tim Tams are for!'" }
                    }
                },
                {
                    emoji: "🥥",
                    name: "Coconut Climbing Contest",
                    successRate: 80,
                    outcomes: {
                        success: { productivity: 5, vibes: 3, timTams: -1, message: "Kirsty scales coconut trees like a pro! Fresh coconuts for everyone at the beach!" },
                        failure: { productivity: 1, vibes: 1, timTams: 2, message: "Kirsty gets stuck halfway up. Fire brigade called. She's having a great time though!" }
                    }
                },
                {
                    emoji: "🐚",
                    name: "Epic Seashell Hunt",
                    successRate: 90,
                    outcomes: {
                        success: { productivity: 6, vibes: 4, timTams: 0, message: "Kirsty finds a rare shell worth $500! Immediately donates it to local marine conservation." },
                        failure: { productivity: 2, vibes: 2, timTams: 1, message: "Kirsty finds only common shells but befriends 12 hermit crabs. Names them all after coworkers." }
                    }
                },
                {
                    emoji: "🍻",
                    name: "Beach Volleyball Tournament", 
                    successRate: 85,
                    outcomes: {
                        success: { productivity: 10, vibes: 1, timTams: -2, message: "Kirsty's team wins! Victory celebration involves teaching everyone the proper Tim Tam slam technique!" },
                        failure: { productivity: 3, vibes: 2, timTams: 3, message: "Kirsty's team loses but she's voted 'Most Enthusiastic Player'. Consolation Tim Tams taste better anyway." }
                    }
                },
                {
                    emoji: "🌅",
                    name: "Sunrise Yoga Session",
                    successRate: 100,
                    outcomes: {
                        success: { productivity: 4, vibes: 5, timTams: 0, message: "Kirsty achieves perfect zen. Her inner peace radiates across the entire beach. Seagulls meditate with her." },
                        failure: { productivity: 4, vibes: 5, timTams: 0, message: "This literally cannot fail. Kirsty's Australian beach yoga powers are too strong." }
                    }
                }
            ];
            
            // Add time-specific activities
            if (ausHour < 10) {
                activities.push({
                    emoji: "☕",
                    name: "Flat White Challenge",
                    successRate: 75,
                    outcomes: {
                        success: { productivity: 7, vibes: 3, timTams: 0, message: "Kirsty creates the perfect flat white art! Café offers her a barista job on the spot!" },
                        failure: { productivity: 2, vibes: 1, timTams: 2, message: "Kirsty's latte art looks like a drop bear. Café patrons find it 'charmingly terrifying'." }
                    }
                });
            }
            
            if (ausHour >= 17) {
                activities.push({
                    emoji: "🌅",
                    name: "Sunset Photography",
                    successRate: 88,
                    outcomes: {
                        success: { productivity: 6, vibes: 4, timTams: 0, message: "Kirsty's sunset photo goes viral! #AussieBeachLife trends worldwide!" },
                        failure: { productivity: 3, vibes: 2, timTams: 1, message: "Kirsty accidentally takes 200 photos of her thumb. 'Abstract art,' she declares!" }
                    }
                });
            }
            
            let optionsText = "🏖️ KIRSTY'S BEACH ADVENTURE SELECTOR\n\n";
            optionsText += `Aussie Time: ${ausHour}:00 - Perfect beach conditions!\n\n`;
            optionsText += "Choose Kirsty's next adventure:\n\n";
            
            activities.forEach((activity, index) => {
                optionsText += `${index + 1}. ${activity.emoji} ${activity.name}\n`;
                optionsText += `   Success Rate: ${activity.successRate}%\n\n`;
            });
            
            optionsText += `Enter number (1-${activities.length}):`;
            
            const choice = prompt(optionsText);
            const selectedIndex = parseInt(choice) - 1;
            
            if (selectedIndex >= 0 && selectedIndex < activities.length) {
                const selectedActivity = activities[selectedIndex];
                const outcome = calculateKirstyOutcome(selectedActivity);
                
                updateKirstyMeters(outcome, selectedActivity);
                alert(outcome.message);
                animateKirstyReaction(outcome);
            } else {
                alert("🤷‍♀️ Invalid selection! Kirsty continues her current beach activity with maximum enthusiasm!");
            }
        }
        
        function sendWork() {
            const beachActivities = [
                "🏄‍♀️ Send Surfboard Wax",
                "🧴 Send SPF 50+ Sunscreen", 
                "🥥 Send Fresh Coconut Water",
                "🐚 Send Seashell Collection Kit",
                "🏖️ Send Beach Umbrella Upgrade"
            ];
            
            const choice = prompt("🏖️ KIRSTY BEACH SUPPLY CENTER\n\nWhat would you like to send to enhance her beach experience?\n\n" + 
                beachActivities.map((item, i) => `${i+1}. ${item}`).join('\n') + 
                "\n\nEnter number (1-5):");
            
            if (choice && choice >= 1 && choice <= 5) {
                const outcomes = [
                    "Perfect! Kirsty's surfboard is now optimized for maximum wave performance!",
                    "Excellent! Kirsty appreciates the skin protection and extends beach time by 3 hours.",
                    "Brilliant! Kirsty is hydrated and ready for another 6 hours of beach activities.",
                    "Amazing! Kirsty starts a new collection and names a shell after you.",
                    "Fantastic! Kirsty now has premium shade and invites you for virtual beach drinks."
                ];
                // Update Kirsty's meters
                const currentProductivity = parseInt(document.getElementById('kirsty-productivity').textContent.replace('%', ''));
                const newProductivity = Math.min(99, currentProductivity + Math.floor(Math.random() * 3) + 1);
                document.getElementById('kirsty-productivity').textContent = newProductivity + '%';
                document.getElementById('kirsty-productivity-bar').style.width = newProductivity + '%';
                
                // Update Tim Tams if coconut water was sent
                if (choice == 3) {
                    const timTams = document.getElementById('kirsty-tim-tams');
                    timTams.textContent = parseInt(timTams.textContent) + 2;
                }
                
                alert(`✅ ${beachActivities[choice-1]}\n\n${outcomes[choice-1]}\n\nBeach Productivity: ${currentProductivity}% → ${newProductivity}%\nKirsty's Beach Happiness: +15%\nWork Completion Probability: Still 0.03%\nLocation: Still definitely at the beach`);
            } else {
                alert("📧 Regular work assignment sent to Kirsty!\n\nAuto-reply received:\n'Thanks for your email! I'm currently out of office enjoying the beautiful Australian weather. If this is urgent, please remember that everything can wait until after beach time. Cheers! 🏖️'\n\nDelivery status: Read and promptly ignored\nWork completion probability: 0.03%");
            }
        }
        
        function updateTime() {
            const now = new Date();
            document.getElementById('updateTime').textContent = now.toLocaleString();
        }
        
        // ===== HELPER FUNCTIONS FOR DYNAMIC CONTENT =====
        
        function getTimeOfDay() {
            const hour = new Date().getHours();
            if (hour < 9) return 'early';
            if (hour < 12) return 'morning';
            if (hour < 14) return 'lunch';
            if (hour < 17) return 'afternoon';
            if (hour < 19) return 'evening';
            return 'night';
        }
        
        function getDrinkForSteve() {
            const timeOfDay = getTimeOfDay();
            const drinks = {
                'early': { 
                    emoji: '☕', 
                    name: 'Extra Strong Coffee', 
                    effect: 'Wake up juice for the undead',
                    baseReduction: 35,
                    sideEffect: 'Caffeine jitters mixed with hope'
                },
                'morning': { 
                    emoji: '☕', 
                    name: 'Coffee', 
                    effect: 'Standard morning fuel',
                    baseReduction: 25,
                    sideEffect: 'Temporary emergence from supply closet'
                },
                'lunch': { 
                    emoji: '☕', 
                    name: 'Post-Lunch Coffee', 
                    effect: 'Food coma prevention',
                    baseReduction: 20,
                    sideEffect: 'Brief window of functionality'
                },
                'afternoon': { 
                    emoji: '⚡', 
                    name: 'Energy Drink', 
                    effect: 'Afternoon crash survival',
                    baseReduction: 30,
                    sideEffect: 'Jittery productivity burst'
                },
                'evening': { 
                    emoji: '🥤', 
                    name: 'Decaf Coffee', 
                    effect: 'Gentle wind-down',
                    baseReduction: 15,
                    sideEffect: 'Placebo effect comfort'
                },
                'night': { 
                    emoji: '🍵', 
                    name: 'Chamomile Tea', 
                    effect: 'Sleep preparation',
                    baseReduction: 10,
                    sideEffect: 'Drowsy acceptance of fate'
                }
            };
            return drinks[timeOfDay];
        }
        
        function getCurrentSteveSadness() {
            const hour = new Date().getHours();
            if (hour < 9) return Math.floor(Math.random() * 10) + 90; // 90-99%
            if (hour >= 9 && hour < 12) return Math.floor(Math.random() * 15) + 75; // 75-89%
            if (hour >= 14 && hour < 17) return Math.floor(Math.random() * 20) + 80; // 80-99%
            if (hour >= 17) return Math.floor(Math.random() * 25) + 70; // 70-94%
            return Math.floor(Math.random() * 20) + 80; // 80-99%
        }
        
        function getBrianSnackOptions() {
            const hour = new Date().getHours();
            const baseOptions = [
                {
                    emoji: '🍪',
                    name: 'GF Cookies',
                    successRate: 85,
                    risk: 'Safe choice',
                    outcomes: {
                        success: { grumpReduction: 25, emoji: '😐', message: 'Classic success! Brian grudgingly accepts your offering.' },
                        failure: { grumpIncrease: 5, emoji: '😠', message: 'These taste like cardboard! Brian is offended by your poor choice.' }
                    }
                },
                {
                    emoji: '🍫',
                    name: 'Dark Chocolate',
                    successRate: 70,
                    risk: 'Moderate gamble',
                    outcomes: {
                        success: { grumpReduction: 35, emoji: '😊', message: 'Endorphin rush activated! Brian actually smiles briefly.' },
                        failure: { grumpIncrease: 10, emoji: '😡', message: 'Too bitter! Brian questions your life choices and taste buds.' }
                    }
                },
                {
                    emoji: '🧀',
                    name: 'Fancy Cheese',
                    successRate: 60,
                    risk: 'High stakes',
                    outcomes: {
                        success: { grumpReduction: 40, emoji: '😌', message: 'Brian appreciates the quality! Momentary contentment achieved.' },
                        failure: { grumpIncrease: 15, emoji: '🤬', message: 'This cheese is NOT aged properly! Brian enters lecture mode about proper cheese storage.' }
                    }
                },
                {
                    emoji: '☕',
                    name: 'Premium Coffee',
                    successRate: 75,
                    risk: 'Usually works',
                    outcomes: {
                        success: { grumpReduction: 20, emoji: '😐', message: 'Caffeine stabilizes Brian. Crisis temporarily averted.' },
                        failure: { grumpIncrease: 8, emoji: '😠', message: 'Too weak! Brian demands stronger coffee and questions the barista\'s training.' }
                    }
                },
                {
                    emoji: '🍩',
                    name: 'Regular Donut (DANGER)',
                    successRate: 15,
                    risk: '⚠️ GLUTEN BOMB',
                    outcomes: {
                        success: { grumpReduction: 50, emoji: '😍', message: 'MIRACLE! Brian forgot about gluten sensitivity and is blissful!' },
                        failure: { grumpIncrease: 30, emoji: '💀', message: 'GLUTEN RAGE ACTIVATED! Brian enters berserker mode!' }
                    }
                }
            ];
            
            // Time-based special options
            if (hour < 9) {
                baseOptions.push({
                    emoji: '🥐',
                    name: 'Fresh Croissant',
                    successRate: 90,
                    risk: 'Morning special',
                    outcomes: {
                        success: { grumpReduction: 30, emoji: '😊', message: 'Perfect morning treat! Brian starts the day less angry.' },
                        failure: { grumpIncrease: 5, emoji: '😒', message: 'Not flaky enough. Brian critiques your bakery choice.' }
                    }
                });
            }
            
            if (hour >= 17) {
                baseOptions.push({
                    emoji: '🥃',
                    name: 'Premium Whiskey',
                    successRate: 75,
                    risk: 'After-hours special',
                    outcomes: {
                        success: { grumpReduction: 50, emoji: '😌', message: 'Brian mellows out completely! Work stress dissolves into philosophical musings.' },
                        failure: { grumpIncrease: 15, emoji: '🤢', message: 'Too strong! Brian becomes nauseated AND grumpy about the quality.' }
                    }
                });
            }
            
            return baseOptions;
        }
        
        function calculateBrianOutcome(snack) {
            const roll = Math.random() * 100;
            const isSuccess = roll <= snack.successRate;
            // Get actual current grumpiness from the meter, not a random value
            const currentGrump = parseInt(document.getElementById('brian-grumpiness').textContent.replace('%', ''));
            
            if (isSuccess) {
                const newGrump = Math.max(20, currentGrump - snack.outcomes.success.grumpReduction);
                return {
                    type: 'success',
                    emoji: snack.outcomes.success.emoji,
                    message: `${snack.emoji} SUCCESS! ${snack.outcomes.success.message}\n\nGrumpiness: ${currentGrump}% → ${newGrump}%\nRoll: ${Math.floor(roll)} (needed ≤${snack.successRate})\n\n✅ Mission accomplished!`,
                    grumpChange: -snack.outcomes.success.grumpReduction
                };
            } else {
                const newGrump = Math.min(99, currentGrump + snack.outcomes.failure.grumpIncrease);
                return {
                    type: 'failure',
                    emoji: snack.outcomes.failure.emoji,
                    message: `${snack.emoji} FAILURE! ${snack.outcomes.failure.message}\n\nGrumpiness: ${currentGrump}% → ${newGrump}%\nRoll: ${Math.floor(roll)} (needed ≤${snack.successRate})\n\n❌ Approach with extreme caution!`,
                    grumpChange: snack.outcomes.failure.grumpIncrease
                };
            }
        }
        
        function getCurrentBrianGrumpiness() {
            const hour = new Date().getHours();
            if (hour >= 19) return Math.floor(Math.random() * 20) + 60; // 60-79% (less grumpy after 7pm)
            if (hour < 9) return Math.floor(Math.random() * 10) + 90; // 90-99% (morning rage)
            if (hour >= 12 && hour < 14) return Math.floor(Math.random() * 15) + 85; // 85-99% (hangry)
            return Math.floor(Math.random() * 15) + 80; // 80-94% (standard grump)
        }
        
        function animateBrianReaction(outcome) {
            const brianEmoji = document.querySelector('.managers-grid .manager-card:nth-child(2) .manager-emoji');
            const originalEmoji = brianEmoji.textContent;
            
            // Show reaction
            brianEmoji.textContent = outcome.emoji;
            
            // Dramatic animation for extreme outcomes
            if (Math.abs(outcome.grumpChange) >= 30) {
                brianEmoji.style.transform = 'scale(1.8) rotate(10deg)';
                brianEmoji.style.transition = 'all 0.5s ease';
                
                setTimeout(() => {
                    brianEmoji.style.transform = 'scale(1) rotate(0deg)';
                }, 1000);
            } else {
                brianEmoji.style.transform = 'scale(1.3) rotate(5deg)';
                setTimeout(() => {
                    brianEmoji.style.transform = 'scale(1) rotate(0deg)';
                }, 500);
            }
            
            // Return to normal after duration based on outcome
            const duration = outcome.type === 'success' ? 
                (Math.abs(outcome.grumpChange) * 300) : // Success lasts longer
                (Math.abs(outcome.grumpChange) * 100);  // Failure is quick
                
            setTimeout(() => {
                brianEmoji.textContent = originalEmoji;
            }, Math.max(2000, duration));
        }
        
        function updateBrianMeters(outcome, snack) {
            const currentGrumpiness = parseInt(document.getElementById('brian-grumpiness').textContent.replace('%', ''));
            const currentEffectiveness = parseInt(document.getElementById('brian-effectiveness').textContent.replace('%', ''));
            
            let newGrumpiness, newEffectiveness;
            
            if (outcome.type === 'success') {
                // outcome.grumpChange is already negative for reductions, so ADD it to reduce grumpiness
                newGrumpiness = Math.max(20, currentGrumpiness + outcome.grumpChange);
                newEffectiveness = Math.min(95, currentEffectiveness + Math.floor(Math.abs(outcome.grumpChange) / 2));
                
                // Update success stats
                const sighs = document.getElementById('brian-sighs');
                sighs.textContent = Math.max(0, parseInt(sighs.textContent) - Math.floor(Math.random() * 5) - 3);
                
                const eyeRolls = document.getElementById('brian-eye-rolls');
                eyeRolls.textContent = Math.max(0, parseInt(eyeRolls.textContent) - Math.floor(Math.random() * 3) - 2);
            } else {
                // outcome.grumpChange is positive for increases
                newGrumpiness = Math.min(99, currentGrumpiness + outcome.grumpChange);
                newEffectiveness = Math.max(5, currentEffectiveness - Math.floor(outcome.grumpChange / 3));
                
                // Update failure stats
                const complaints = document.getElementById('brian-complaints');
                complaints.textContent = parseInt(complaints.textContent) + Math.floor(Math.random() * 3) + 1;
                
                const sighs = document.getElementById('brian-sighs');
                sighs.textContent = parseInt(sighs.textContent) + Math.floor(Math.random() * 5) + 2;
            }
            
            // Update snacks consumed
            const snacksConsumed = document.getElementById('brian-snacks-consumed');
            snacksConsumed.textContent = parseInt(snacksConsumed.textContent) + 1;
            
            // Update meters
            document.getElementById('brian-grumpiness').textContent = newGrumpiness + '%';
            document.getElementById('brian-grumpiness-bar').style.width = newGrumpiness + '%';
            document.getElementById('brian-effectiveness').textContent = newEffectiveness + '%';
            document.getElementById('brian-effectiveness-bar').style.width = newEffectiveness + '%';
        }
        
        function getKirstyCurrentActivity() {
            const hour = new Date().getHours();
            const ausHour = (hour + 15) % 24; // Convert to Australian time
            
            if (ausHour < 7) {
                return {
                    activity: 'sunrise yoga on the beach',
                    location: 'Byron Bay sunrise spot',
                    status: 'Early Bird Beach Vibes'
                };
            } else if (ausHour < 10) {
                return {
                    activity: 'having a flat white at a beachside café',
                    location: 'Bondi Beach café',
                    status: 'Perfect Morning Coffee'
                };
            } else if (ausHour < 15) {
                return {
                    activity: 'surfing the perfect waves',
                    location: 'Gold Coast',
                    status: 'Peak Beach Performance'
                };
            } else if (ausHour < 18) {
                return {
                    activity: 'having afternoon drinks with a view',
                    location: 'Manly Beach bar',
                    status: 'Afternoon Relaxation Mode'
                };
            } else if (ausHour < 21) {
                return {
                    activity: 'watching the sunset with Tim Tams',
                    location: 'Great Ocean Road lookout',
                    status: 'Golden Hour Bliss'
                };
            } else {
                return {
                    activity: 'stargazing on the beach',
                    location: 'Surfers Paradise',
                    status: 'Night Beach Meditation'
                };
            }
        }
        
        // ===== INITIALIZATION =====
        updateTime();
        setInterval(updateTime, 30000);
        
        // Easter egg: Click on emojis for sound effects
        document.querySelectorAll('.manager-emoji').forEach(emoji => {
            emoji.addEventListener('click', function() {
                if (this.textContent === '😢') {
                    alert("*sniffling sounds*\n\nSteve: 'Why is everything so hard?'");
                } else if (this.textContent === '😠') {
                    alert("*aggressive keyboard typing*\n\nBrian: 'WHAT NOW?!'");
                } else if (this.textContent === '😎') {
                    alert("*sound of waves and seagulls*\n\nKirsty: 'G'day! Just living the dream down here in Oz! 🌊☀️'");
                }
            });
        });
    </script>
</body>
</html>
